{% extends 'reading/base.html' %}

{% block content %}
<h2 style="display: flex; justify-content: space-between; align-items: center;">
  ðŸ“š My Reading Plans
  <span>
    <a href="{% url 'create_reading_plan' %}" class="button" style="font-size: 0.8em;">âž• Create Plan</a>
    <a href="{% url 'create_goal' %}" class="button" style="font-size: 0.8em; margin-left: 8px;">ðŸŽ¯ Set Goal</a>
    <a href="{% url 'weekly_report' %}" class="button" style="font-size: 0.8em; margin-left: 8px;">ðŸ“ˆ Weekly Report</a>
    <a href="{% url 'check_falling_behind' %}" class="button" style="font-size: 0.8em; margin-left: 8px;">ðŸ“‰ Behind?</a>
  </span>
</h2>

{% if plans %}
  <div style="margin-top: 20px;">
    {% for plan in plans %}
      <div style="border: 1px solid #ccc; border-radius: 8px; padding: 15px; margin-bottom: 20px;">
        <h3>{{ plan.book.title }}</h3>
        <p><strong>Start Date:</strong> {{ plan.start_date }}</p>
        <p><strong>Target End Date:</strong> {{ plan.target_end_date }}</p>
        <p><strong>Daily Target:</strong> {{ plan.daily_target_pages }} pages/day</p>
        <p><strong>Total Pages Read:</strong> {{ plan.total_pages_read }}</p>

        <div class="progress-bar">
          <div class="progress-fill" style="width: {{ plan.percent_complete }}%;">
            {{ plan.percent_complete }}%
          </div>
        </div>

        <a href="{% url 'reading_plan_detail' plan.id %}" class="button">View Details</a>
        <a href="{% url 'log_progress' plan.id %}" class="button">Log Progress</a>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>You don't have any active reading plans yet.</p>
{% endif %}

<hr style="margin: 40px 0;">

<h2>ðŸŽ¯ My Reading Goals</h2>

{% if goals %}
  <ul style="margin-top: 15px;">
    {% for goal in goals %}
      <li style="margin-bottom: 10px;">
        <strong>{{ goal.name }}</strong> â€”
        {{ goal.target_amount }} {{ goal.goal_type }} by {{ goal.end_date }}
        {% if goal.completed %}
          âœ… <em>Completed</em>
        {% else %}
          ðŸ”„ <em>In Progress</em>
        {% endif %}
      </li>
    {% endfor %}
  </ul>
{% else %}
  <p>You have no active reading goals.</p>
{% endif %}
{% endblock %}